<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
<style>
/* Custom styles */
.container {
    min-height: 100vh;
}

.profile-icon, .logout-icon {
    font-size: 20px;
}

.form-control.error {
    border-color: #dc3545 !important;
}

.error-message {
    color: #dc3545;
}
 /* Reset CSS */
 * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: Arial, sans-serif;
    background-color: #f2f2f2;
    margin: 0;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #333;
    color: white;
    padding: 20px;
}

.navbar h1 {
    margin: 0;
}

.search-container {
    display: flex;
}

.search-container input[type="text"] {
    padding: 10px;
    border: none;
    border-radius: 5px 0 0 5px;
    font-size: 16px;
}

.search-container button {
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 0 5px 5px 0;
    cursor: pointer;
    font-size: 16px;
}

.search-container button:hover {
    background-color: #45a049;
}

.main-guide {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}

.guide-card {
    background-color: #fff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin: 20px;
    border-radius: 10px;
    overflow: hidden;
    width: 300px;
}

.guide-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.guide-details {
    padding: 20px;
}

.guide-details h2 {
    margin-bottom: 10px;
}

.guide-details p {
    margin-bottom: 5px;
}
</style>
</head>
<body>
<header class="bg-dark text-white py-3">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <h1 class="mb-0">Admin Panel</h1>
        <div>
            <a href="{{ url_for('logout') }}">
            <button title="Logout" class="btn btn-dark d-none d-md-inline-block"><i class="fas fa-sign-out-alt logout-icon"></i></button>
            </a>
        </div>
    </div>
</header>
<div class="container-fluid">
    <div class="row justify-content-center">
        <nav id="sidebarCollapse" class="col-md-3 col-lg-2 d-md-block collapse sidebar">
            <div class="position-sticky">
                <h3 class="px-3 pt-3">Menu</h3>
                <ul class="nav flex-column px-3">
                    <li class="nav-item"><a href="#" onclick="openAddForm()" class="nav-link">Add</a></li>
                    <li class="nav-item"><a href="#" onclick="openUpdateForm()" class="nav-link">Display Guides</a></li>
                    <li class="nav-item"><a href="#" onclick="openusers()" class="nav-link">Display Users</a></li>
                    <li class="nav-item"><a href="#" onclick="openreceipts()" class="nav-link">Display Receipts</a></li>
                    <li class="nav-item"><a href="#" onclick="openfeedback()" class="nav-link">Display Feedback</a></li>
                </ul>
            </div>
        </nav>
        <main class="col-md-9 ms-md-auto col-lg-10 px-md-4 py-4">
            <div id="addForm" style="display: none;">
                <h2>Add Guide</h2>
                <form id="guideForm" action="{{ url_for('add') }}" method="POST">
                    <div class="mb-3">
                        <label for="image" class="form-label">Image</label>
                        <input type="file" class="form-control" id="image" name="image">
                    </div>
                    <div class="mb-3">
                        <label for="gid" class="form-label">GID</label>
                        <input type="text" class="form-control" id="gid" name="gid">
                    </div>
                    <div class="mb-3">
                        <label for="guideName" class="form-label">Guide Name</label>
                        <input type="text" class="form-control" id="guideName" name="guideName">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email ID</label>
                        <input type="email" class="form-control" id="email" name="email">
                    </div>
                    <div class="mb-3">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phone" name="phone">
                    </div>
                    <div class="mb-3">
                        <label for="address" class="form-label">Address</label>
                        <textarea class="form-control" id="address" name="address" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="adhar" class="form-label">Adhar Number</label>
                        <input type="text" class="form-control" id="adhar" name="adhar">
                    </div>
                    <div class="mb-3">
                        <label class="form-check-label">Languages Known:</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="hindi" name="language" value="Hindi">
                            <label class="form-check-label" for="hindi">Hindi</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="english" name="language" value="English">
                            <label class="form-check-label" for="english">English</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="marathi" name="language" value="Marathi">
                            <label class="form-check-label" for="marathi">Marathi</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="perHour" class="form-label">Per Hours</label>
                        <input type="text" class="form-control" id="perHour" name="perHour">
                    </div>
                    <div class="mb-3">
                        <label for="availableAreas" class="form-label">Available Areas</label>
                        <select class="form-select" id="availableAreas" name="availableAreas">
                            <option value="">Select</option>
                            <option value="Area1">Area 1</option>
                            <option value="Area2">Area 2</option>
                            <option value="Area3">Area 3</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                    <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear</button>
                </form>
            </div> 
            <div id="updateForm" style="display: none;">  
                <div class="container">
            
                    <div class="main-guide">
                        {% for document in data %}
                        <div class="guide-card">
                            <img src="{{ url_for('static', filename=document.G_Image) }}" alt="">
                            <div class="guide-details">
                                <h2>{{ document.G_Name }}</h2>
                                <p>Guide ID: {{ document.GID }}</p>
                                <p>Email: {{ document.G_Email }}</p>
                                <p>Phone: {{ document.G_Phone }}</p>
                                <p>Area: {{ document.G_Area }}</p>
                                <p>Language: {{ document.G_Language }}</p>
                                <p>Hourly Rate: {{ document.G_HourRate }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>        
            <div id="receipts" style="display: none;">
                <table class="table mt-4">
                    <thead>
                        
                        <tr>
                            <th scope="col">Full Name</th>
                            <th scope="col">Email Id:</th>
                            <th scope="col">Contact Number</th>
                            <th scope="col">Native Place</th>
                            <th scope="col">Visiting Place</th>
                            <th scope="col">Number of Person</th>
                            <th scope="col">Starting Date</th>
                            <th scope="col">Ending Date</th>
                            <th scope="col">Allocated Guide Id</th>
                            <th scope="col">Total Price</th> <!-- Edit column -->
                        </tr>
                    </thead>
                    <tbody id="guideTableBody">
                        <!-- Table body content will be dynamically populated -->
                        {% for document in booking_data %}
                        <tr>
                            <td>{{ document['fast_name'] }} {{ document['last_name'] }}</td>
                            <td>{{ document['email_id'] }}</td>
                            <td>{{ document['contact'] }}</td>
                            <td>{{ document['N_place'] }}</td>
                            <td>{{ document['V_place'] }}</td>
                            <td>{{ document['N_person'] }}</td>
                            <td>{{ document['S_date'] }}</td>
                            <td>{{ document['E_date'] }}</td>
                            <td>{{ document['GID'] }}</td>
                            <td>{{ document['T_price'] }}</td>
                        </tr>
                        {% endfor %}
                        <!-- Table body content will be dynamically populated -->
                    </tbody>
                </table>
            </div>
            <div id="users" style="display: none;">
                <table class="table mt-4">
                    <thead>
                        
                        <tr>
                            <th scope="col">Full Name</th>
                            <th scope="col">Email Id:</th>
                            <th scope="col">Contact Number</th>
                            <th scope="col">Password</th>
                        </tr>
                    </thead>
                    <tbody id="guideTableBody">
                        <!-- Table body content will be dynamically populated -->
                        {% for document in user_data %}
                        <tr>
                            <td>{{ document['fast_name'] }} {{ document['last_name'] }}</td>
                            <td>{{ document['email_id'] }}</td>
                            <td>{{ document['contact'] }}</td>
                            <td>{{ document['password'] }}</td>
                        </tr>
                        {% endfor %}
                        <!-- Table body content will be dynamically populated -->
                    </tbody>
                </table>
            </div>
            <div id="feedback" style="display: none;">
                <table class="table mt-4">
                    <thead>
                        
                        <tr>
                            <th scope="col">Full Name</th>
                            <th scope="col">Email Id:</th>
                            <th scope="col">Message</th>
                        </tr>
                    </thead>
                    <tbody id="guideTableBody">
                        <!-- Table body content will be dynamically populated -->
                        {% for document in feedback_data %}
                        <tr>
                            <td>{{ document['F_Name'] }}</td>
                            <td>{{ document['F_Email'] }}</td>
                            <td>{{ document['F_Message'] }}</td>
                        </tr>
                        {% endfor %}
                        <!-- Table body content will be dynamically populated -->
                    </tbody>
                </table>
            </div>
        </main>
    </div>
</div>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
// Function to toggle between add and update forms
function openAddForm() {
    $('#addForm').show();
    $('#updateForm').hide();
    $('#receipts').hide();
    $('#users').hide();
    $('#feedback').hide();
}

function openUpdateForm() {
    $('#addForm').hide();
    $('#updateForm').show();
    $('#receipts').hide();
    $('#users').hide();
    $('#feedback').hide();
}

function openreceipts() {
    $('#addForm').hide();
    $('#updateForm').hide();
    $('#receipts').show();
    $('#users').hide();
    $('#feedback').hide();
}

function openusers() {
    $('#addForm').hide();
    $('#updateForm').hide();
    $('#receipts').hide();
    $('#users').show();
    $('#feedback').hide();
}

function openfeedback() {
    $('#addForm').hide();
    $('#updateForm').hide();
    $('#receipts').hide();
    $('#users').hide();
    $('#feedback').show();
}

// Form validation using jQuery
$(document).ready(function() {
    $('#guideForm').submit(function(e) {
        e.preventDefault();
        // Validation code here
    });

    // Clear form fields on button click
    function clearForm() {
        $('#guideForm')[0].reset();
        $('.error-message').remove();
        $('.form-control').removeClass('error');
    }

    // Function to search guide by ID
    function searchGuide() {
        var searchId = $('#searchId').val().trim();
        if (searchId === '') {
            alert('Please enter ID to search.');
            return;
        }
        // Implement search functionality here
        // Show the update form with the fetched data
        $('#updateForm').show();
    }
});
$(document).ready(function() {
    $('#guideForm').submit(function(e) {
        e.preventDefault();
        var formData = new FormData(this);
        $.ajax({
            url: '/add',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function(response) {
                alert(response);
                // Optionally, you can redirect or perform other actions after successful form submission
            },
            error: function(xhr, status, error) {
                console.error(error);
                alert('An error occurred while submitting the form.');
            }
        });
    });
});
function searchGuide() {
    var searchId = $('#searchId').val().trim();
    if (searchId === '') {
        alert('Please enter ID to search.');
        return;
    }
    $.ajax({
        url: '/search_guide',
        type: 'POST',
        data: { gid: searchId },
        success: function(response) {
            populateGuideTable(response);
        },
        error: function(xhr, status, error) {
            console.error(error);
            alert('An error occurred while fetching data.');
        }
    });
}

function populateGuideTable(data) {
    var tableBody = $('#guideTableBody');
    tableBody.empty();
    data.forEach(function(row) {
        var tr = $('<tr>');
        tr.append('<td>' + row.gid + '</td>');
        tr.append('<td>' + row.guide_name + '</td>');
        tr.append('<td>' + row.email + '</td>');
        tr.append('<td>' + row.phone + '</td>');
        tr.append('<td>' + row.address + '</td>');
        tr.append('<td>' + row.adhar + '</td>');
        tr.append('<td>' + row.language + '</td>');
        tr.append('<td>' + row.per_hour + '</td>');
        tr.append('<td>' + row.available_areas + '</td>');
        tr.append('<td><img src="' + row.image + '" height="50"></td>');
        tr.append('<td><button class="btn btn-primary btn-sm" onclick="editGuide(' + row.id + ')">Edit</button></td>');
        tableBody.append(tr);
    });
}


</script>
</body>
</html>
